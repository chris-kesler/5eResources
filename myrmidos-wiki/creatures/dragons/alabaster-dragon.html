<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-US-Compatible" content="e-edge">
    <title>KnowOne's Website of Everything</title>
    <link rel="icon" href="/_SiteResources/Images/OwlOfMinerva_ModifiedLogo.png">
    <link rel="stylesheet" href="/caped-crusaders-style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>  
    <script>
      function capitalizeFirstLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
      }

      $(function readJSON() {

        // Reading the name of this file
        var page_array = window.location.pathname.split("/");
        var page_title = page_array.pop();
        var page_category = page_array.pop();
        var page_directory = page_array.pop();

        // Reading data from our JSON file
        $.getJSON(`/myrmidos-wiki/` + page_directory + `.json`, function(data) {

          // Looping through the JSON data 
          $.each(data.entries, function(i, f) {

            // Finding the entry that matches this file
            if (f.entry_name.toLowerCase().replace(/\s/g, '-').replace("'", "") + ".html" == page_title) {
            


              // =========================================================================================
              // Populating the page title elements using attributes that we know for certain will be present
              // =========================================================================================

              // Populating the page title within the header
              document.getElementById("common-page-header-title").innerHTML = "Myrmidos Wiki:  " + capitalizeFirstLetter(page_directory) + " > " + capitalizeFirstLetter(page_category);


              // Populating the page title within the page content
              document.getElementById("common-page-content-title").innerHTML = "<div id=" + f.entry_name.toLowerCase().replace(/\s/g, '-').replace(`'`, ``) + ">" + f.entry_name + "</div>";

              // Populating the page title in the floating nav table
              var tblRow = "<tr><th><a href='#" + f.entry_name.toLowerCase().replace(/\s/g, '-').replace(`'`, ``) + "'>" + f.entry_name + "</a></th></tr>";
              $(tblRow).appendTo("#entry-page-nav-table tbody");


              // Populating the page back button into the placeholder div
              document.getElementById("common-page-back-button-holder").innerHTML = "<button id='common-page-back-button' onclick = 'location.href=`../" + page_category + ".html`'>Out to " + capitalizeFirstLetter(page_category) + "</button>";



              // =========================================================================================
              // Populating the page overview table using attributes that may be present in the JSON source
              // =========================================================================================

              // Defining a table row with an image, populating it with JSON data, and appending it to the overview table
              if (f.img_rehosted != undefined && f.img_rehosted_source != undefined ) {

                // The image with a populated rehost and credit link upon clicking
                var tblRow = "<tr><th colspan='2'><img id='entry-page-overview-table-image' alt='" + f.entry_name + "' target='blank' src='" + f.img_rehosted + "' onclick='window.open(`" + f.img_rehosted_source + "`)'></th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");
              } else {

                // A default placeholder image that does activate when clicked
                var tblRow = "<tr><th colspan='2'><img id='entry-page-overview-table-image' alt='" + f.entry_name + "' target='blank' src='/_SiteResources/Images/WikiPlaceholder.png' onclick='window.open(this.src)'></th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");
              }
              
              // Defining a table row with an image link, populating it with JSON data, and appending it to the overview table
              if (f.img_linked != undefined && f.img_linked_source != undefined) { 

                // Appending a table row with a link to the page art 
                var tblRow = "<tr><th colspan='2'><i><a href='" + f.img_linked + "' target='_blank'>Link to Additional " + f.entry_name + " Art</a></i></th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a link to the page art source
                var tblRow = "<tr><th colspan='2'><i><a href='" + f.img_linked_source + "' target='_blank'>Link to Additional Art Source</a></i></th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

              } else {
                // Appending a table row with a link to the page art 
                var tblRow = "<tr><th colspan='2'><i><a href='" + f.img_rehosted + "' target='_blank'>Link to Above " + f.entry_name + " Art</a></i></th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a link to the page art source
                var tblRow = "<tr><th colspan='2'><i><a href='" + f.img_rehosted_source + "' target='_blank'>Link to Above Art Source</a></i></th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

              }


              // Appending a table row with the creature name 
              var tblRow = "<tr><th colspan='2'>" + f.entry_name + "</th></tr>";
              $(tblRow).appendTo("#entry-page-overview-table tbody");

              if (f.entry_type != undefined && f.entry_category != undefined) {
                // Appending a table row with the creature type and category 
                var tblRow = "<tr><th colspan='2'>" + f.entry_type + " " + f.entry_category + "</th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a heading for a data group 
                var tblRow = "<tr><th colspan='2'>General Information</th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a heading for a data group 
                var tblRow = "<tr><td>Category</td><td><a href='/myrmidos-wiki/" + capitalizeFirstLetter(page_category) + ".html'>" + f.entry_category + "</a></td></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a heading for a data group 
                var tblRow = "<tr><td>Type</td><td>" + f.entry_type + "</td></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");
              } else {
                // Appending a table row with a default creature type and category 
                var tblRow = "<tr><th colspan='2'>Unknown Creature</th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a heading for a data group 
                var tblRow = "<tr><th colspan='2'>General Information</th></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a default heading for a data group 
                var tblRow = "<tr><td>Category</td><td>Unknown</td></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

                // Appending a table row with a default heading for a data group 
                var tblRow = "<tr><td>Type</td><td>Unknown</td></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");

              }

              if (f.entry_variety != undefined) {
                // Appending a table row with the creature variety 
                var tblRow = "<tr><td>Variety</td><td>" + f.entry_variety + "</td></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");
              } else {
                // Appending a table row with a default variety 
                var tblRow = "<tr><td>Variety</td><td>Unknown</td></tr>";
                $(tblRow).appendTo("#entry-page-overview-table tbody");
              }


              // Dynamically and adaptively populating overview table information from the JSON file 
              if (f.overview_table_groups != undefined) {
                for(var z = 0; f.overview_table_groups.length > z; z++) {
                  var tblRow = "<tr><th colspan='2'>" + f.overview_table_groups[z].overview_table_group_heading + "</th></tr>";
                  $(tblRow).appendTo("#entry-page-overview-table tbody");

                  if (f.overview_table_groups[z].overview_table_group_data != undefined) {
                    for(var y = 0; f.overview_table_groups[z].overview_table_group_data.length > y; y++) {
                      var tblRow = "<tr><td>" + f.overview_table_groups[z].overview_table_group_data[y].heading + "</td><td>" + f.overview_table_groups[z].overview_table_group_data[y].content + "</td></tr>";
                      $(tblRow).appendTo("#entry-page-overview-table tbody");
                    }
                  }
                }
              }



              // =========================================================================================
              // Populating the page description text using dynamic scripts that read json libraries
              // =========================================================================================

              // Populating the page overview text
              if (f.entry_description_overview != undefined) {
                document.getElementById("common-page-description").innerHTML = "<p>" + f.entry_description_overview + "</p>";
              }


              // Checking if the page content library is present
              if (f.entry_description_library != undefined) {

                // Looping through all the library entries
                for(var x = 0; f.entry_description_library.length > x; x++) {

                  // Ensuring data exists
                  if (f.entry_description_library[x].heading != undefined && f.entry_description_library[x].content != undefined) {

                    // Populating the heading and content
                    document.getElementById("common-page-description").innerHTML += "<div id='" + f.entry_description_library[x].heading.toLowerCase().replace(/\s/g, '-').replace(`'`, ``) + "'><h3>" + f.entry_description_library[x].heading + "</h3></div><p>" + f.entry_description_library[x].content + "</p>";

                    // Populating the page heading in the floating nav table
                    var tblRow = "<tr><td><a style='margin-left: 10px' href='#" + f.entry_description_library[x].heading.toLowerCase().replace(/\s/g, '-').replace(`'`, ``) + "'>" + f.entry_description_library[x].heading + "</a></td></tr>";
                    $(tblRow).appendTo("#entry-page-nav-table tbody");


                    // Checking for sublibrary
                    if (f.entry_description_library[x].sublibrary != undefined) {

                      // Looping through all entries
                      for(var w = 0; f.entry_description_library[x].sublibrary.length > w; w++) {

                        // Verifying content exists
                        if (f.entry_description_library[x].sublibrary[w].heading != undefined && f.entry_description_library[x].sublibrary[w].content != undefined) {

                          // Populating subheading and content
                          document.getElementById("common-page-description").innerHTML += "<div id='" + f.entry_description_library[x].sublibrary[w].heading.toLowerCase().replace(/\s/g, '-').replace(`'`, ``) + "'><h4>&#8226;  " + f.entry_description_library[x].sublibrary[w].heading + "</h4></div><p>" + f.entry_description_library[x].sublibrary[w].content + "</p>";
                          
                          // Populating the page heading in the floating nav table
                          var tblRow = "<tr><td><a style='margin-left: 20px' href='#" + f.entry_description_library[x].sublibrary[w].heading.toLowerCase().replace(/\s/g, '-').replace(`'`, ``) + "'>&#8226;  " + f.entry_description_library[x].sublibrary[w].heading + "</a></td></tr>";
                          $(tblRow).appendTo("#entry-page-nav-table tbody");

                        }
                      }
                    }
                  }
                }
              }
            }

          });

        });

      });
    </script>
  </head>


  <body>
    <!-- The fixed background div -->
    <div class="common-page-background"> 

        <!-- A div to hold our header -->
        <div class="common-page-header">
    
            <!-- Importing the header -->
            <div class="import-common-page-header"></div>
    
            <!-- The page title within the header -->
            <h1 id="common-page-header-title"></h1>
            <hr>
        </div>
            
        <!-- A transparent div to build everything else on top of -->
        <div class="common-page-content-transparent">
    
          <!-- A button to hide and unhide the navigation table -->
          <button id='entry-page-nav-table-hide-button' onclick='hideUnhideNavTable()'>&#60;&#60;</button>

          <!-- A fixed navigation section that contains links to page content sections -->
          <section id="entry-page-nav-table-section">

            <!-- A button to scroll the nav table up if some of it is cropped by the viewport -->
            <button id='entry-page-nav-table-show-button' onclick='hideUpDownNavTable()'>&and; &and; &and;</button>

            <!-- The table to hold the navigation links -->
            <table id="entry-page-nav-table">
              <tbody></tbody>
            </table>
          </section>

          <!-- An empty div to allow other elements to style around the fixed nav table -->
          <section id="entry-page-nav-table-section-placeholder"></section>

            <!-- An off white chunk of the page that holds content -->
            <section class="common-page-content-section">

            <!-- A back button that navigates out in the file structure  -->
            <div id="common-page-back-button-holder"></div>
            <!-- The title of the page content, including the source as a link -->
            <h2 id="common-page-content-title"></h2>
            <hr>
                        
            <!-- A table to hold the concise page data -->
            <table class="entry-page-overview-table" id="entry-page-overview-table">
              <tbody></tbody>
            </table>
    
            <!-- A paragraph to hold the page content and descriptions -->
            <div id="common-page-description"></div>
            </section>
        </div>
    
        <!-- Importing the footer -->
        <footer class="import-common-page-footer"></footer>
    </div>
  </body>
</html>

<script type="text/javascript">
  $(function () {

    $(".import-common-page-header").load("/_SiteResources/Pages/import-common-page-header.html");
    $(".import-common-page-footer").load("/_SiteResources/Pages/import-common-page-footer.html");

  });

  function hideUnhideNavTable() {
    var hidden = '-1000px' ;
    var unhidden = '3vw';
    
    if (document.getElementById('entry-page-nav-table-section').style.marginLeft != hidden) {
      document.getElementById('entry-page-nav-table-section').style.marginLeft = hidden;
      document.getElementById('entry-page-nav-table-section-placeholder').style.marginLeft = hidden;

      document.getElementById('entry-page-nav-table-hide-button').innerHTML = '&#62; &#62;';

    } else {
      document.getElementById('entry-page-nav-table-section').style.marginLeft = unhidden;
      document.getElementById('entry-page-nav-table-section-placeholder').style.marginLeft = unhidden;

      document.getElementById('entry-page-nav-table-hide-button').innerHTML = '&#60; &#60;';
    }
  }

  function hideUpDownNavTable() {
    var hidden = '-250px';
    var unhidden = '-10px';
    
    if (document.getElementById('entry-page-nav-table-section').style.marginTop != hidden) {
      document.getElementById('entry-page-nav-table-section').style.marginTop = hidden;
      document.getElementById('entry-page-nav-table-hide-button').style.marginTop = hidden;

      document.getElementById('entry-page-nav-table-show-button').innerHTML = '&or; &or; &or;';

    } else {
      document.getElementById('entry-page-nav-table-section').style.marginTop = unhidden;
      document.getElementById('entry-page-nav-table-hide-button').style.marginTop = unhidden;

      document.getElementById('entry-page-nav-table-show-button').innerHTML = '&and; &and; &and;';
    }
  }


</script>