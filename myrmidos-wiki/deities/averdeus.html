<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-US-Compatible" content="e-edge">
    <title>KnowOne's Website of Everything</title>
    <link rel="icon" href="/resources/images/OwlOfMinerva_ModifiedLogo.png">
    <link rel="stylesheet" href="/caped-crusaders-style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>  
    <script>
      function capitalizeFirstLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
      }

      $(function readJSON() {

        // Reading the name of this file
        var page_array = window.location.pathname.split("/");
          var page_title = page_array.pop();
          var page_directory = page_array.pop();
          var page_subsite = page_array.pop();

        // Reading data from our JSON file
        $.getJSON(`/myrmidos-wiki/` + page_category + `.json`, function(data) {

          // Looping through the JSON data 
          $.each(data.entries, function(i, f) {

            // Finding the entry that matches this file
            if (f.entry_name.toLowerCase().replace(/\s/g, '-').replace("'", "") + ".html" == page_title) {
            
              // Populating the page title within the header
              document.getElementById("page-title-table-path").innerHTML = "Myrmidos Wiki:  " + capitalizeFirstLetter(page_category);

              // Populating the page title within the page content
              document.getElementById("common-page-content-section-title").innerHTML = f.entry_name;

              // Populating the page back button into the placeholder div
              document.getElementById("common-page-back-button-holder").innerHTML = "<button id='common-page-back-button' onclick = 'location.href=`../" + page_category + ".html`'>Out to " + capitalizeFirstLetter(page_category) + "</button>";

              // Defining a table row with an image, populating it with JSON data, and appending it to the overview table
              if (f.img_rehosted != undefined && f.img_rehosted_source != undefined ) {

                // The image with a populated rehost and credit link upon clicking
                var table_row = "<tr><th colspan='2'><img id='page-attributes-table-image' alt='" + f.entry_name + "' target='blank' src='" + f.img_rehosted + "' onclick='window.open(`" + f.img_rehosted_source + "`)'></th></tr>";
                $(table_row).appendTo("#page-attributes-table tbody");
              } else {

                // A default placeholder image that does activate when clicked
                var table_row = "<tr><th colspan='2'><img id='page-attributes-table-image' alt='" + f.entry_name + "' target='blank' src='/resources/images/WikiPlaceholder.png' onclick='window.open(this.src)'></th></tr>";
                $(table_row).appendTo("#page-attributes-table tbody");
              }
              
              if (f.img_linked != undefined && f.img_linked_source != undefined) { 

                // Appending a table row with a link to the page art 
                var table_row = "<tr><th colspan='2'><i><a href='" + f.img_linked + "' target='_blank'>Link to Additional " + f.entry_name + " Art</a></i></th></tr>";
                $(table_row).appendTo("#page-attributes-table tbody");

                // Appending a table row with a link to the page art source
                var table_row = "<tr><th colspan='2'><i><a href='" + f.img_linked_source + "' target='_blank'>Link to Additional Art Source</a></i></th></tr>";
                $(table_row).appendTo("#page-attributes-table tbody");

              } else {
                // Appending a table row with a link to the page art 
                var table_row = "<tr><th colspan='2'><i><a href='" + f.img_rehosted + "' target='_blank'>Link to Above " + f.entry_name + " Art</a></i></th></tr>";
                $(table_row).appendTo("#page-attributes-table tbody");

                // Appending a table row with a link to the page art source
                var table_row = "<tr><th colspan='2'><i><a href='" + f.img_rehosted_source + "' target='_blank'>Link to Above Art Source</a></i></th></tr>";
                $(table_row).appendTo("#page-attributes-table tbody");

              }

              // Appending a table row with the creature name 
              var table_row = "<tr><th colspan='2'>" + f.entry_name + "</th></tr>";
              $(table_row).appendTo("#page-attributes-table tbody");

              // Appending a table row with the creature type and category 
              var table_row = "<tr><th colspan='2'>" + f.entry_type + " " + f.entry_category + "</th></tr>";
              $(table_row).appendTo("#page-attributes-table tbody");

              // Appending a table row with a heading for a data group 
              var table_row = "<tr><th colspan='2'>General Information</th></tr>";
              $(table_row).appendTo("#page-attributes-table tbody");

              // Appending a table row with a heading for a data group 
              var table_row = "<tr><td>Category</td><td><a href='/myrmidos-wiki/" + capitalizeFirstLetter(page_category) + ".html'>" + f.entry_category + "</a></td></tr>";
              $(table_row).appendTo("#page-attributes-table tbody");

              // Appending a table row with a heading for a data group 
              var table_row = "<tr><td>Type</td><td>" + f.entry_type + "</td></tr>";
              $(table_row).appendTo("#page-attributes-table tbody");

              // Appending a table row with a heading for a data group 
              var table_row = "<tr><td>Variety</td><td>" + f.entry_variety + "</td></tr>";
              $(table_row).appendTo("#page-attributes-table tbody");



              try {
                // Dynamically and adaptively populating overview table information from the JSON file 
                for(var z = 0; f.overview_table_groups.length > z; z++) {
                    var table_row = "<tr><th colspan='2'>" + f.overview_table_groups[z].overview_table_group_heading + "</th></tr>";
                    $(table_row).appendTo("#page-attributes-table tbody");

                    for(var y = 0; f.overview_table_groups[z].overview_table_group_data.length > y; y++) {
                        var table_row = "<tr><td>" + f.overview_table_groups[z].overview_table_group_data[y].title + "</td><td>" + f.overview_table_groups[z].overview_table_group_data[y].content + "</td></tr>";
                        $(table_row).appendTo("#page-attributes-table tbody");

                    }

                }

              } catch {
                  
              }

              // Populating the page description text using dynamic scripts that read json libraries

              // Populating the page overview text
              if (f.entry_description_overview != undefined) {
                document.getElementById("page-description-div").innerHTML = "<p>" + f.entry_description_overview + "</p>";
              }

              // Checking if the page content library is present
              if (f.entry_description_library != undefined) {

                // Looping through all the library entries
                for(var x = 0; f.entry_description_library.length > x; x++) {

                  // Ensuring data exists
                  if (f.entry_description_library[x].title != undefined && f.entry_description_library[x].content != undefined) {

                    // Populating the heading and content
                    document.getElementById("page-description-div").innerHTML += "<h3>" + f.entry_description_library[x].title + "</h3><p>" + f.entry_description_library[x].content + "</p>";

                    // Checking for sublibrary
                    if (f.entry_description_library[x].sublibrary != undefined) {

                      // Looping through all entries
                      for(var w = 0; f.entry_description_library[x].sublibrary.length > w; w++) {

                        // Verifying content exists
                        if (f.entry_description_library[x].sublibrary[w].title != undefined && f.entry_description_library[x].sublibrary[w].content != undefined) {

                          // Populating subheading and content
                          document.getElementById("page-description-div").innerHTML += "<h4>" + f.entry_description_library[x].sublibrary[w].title + "</h4><p>" + f.entry_description_library[x].sublibrary[w].content + "</p>";
                        }
                      }
                    }
                  }
                }
              }
            }

          });

        });

      });
    </script>
  </head>


  <body>
    <!-- The fixed background div -->
    <div id="page-background-div"> 

        <!-- A div to hold our header -->
        <div class="common-page-header">
    
            <!-- Importing the header -->
            <div id="import-header"></div>
    
            <!-- The page title within the header -->
            <h1 id="page-title-table-path"></h1>
            <hr>
        </div>
            
        <!-- A transparent div to build everything else on top of -->
        <div class="common-page-content-section-transparent">
    
            <!-- An off white chunk of the page that holds content -->
            <section class="page-content-section">
    
            <!-- A back button that navigates out in the file structure  -->
            <div id="common-page-back-button-holder"></div>
            <!-- The title of the page content, including the source as a link -->
            <h2 id="common-page-content-section-title"></h2>
            <hr>
                        
            <!-- A table to hold the concise page data -->
            <table id="page-attributes-table">
              <tbody></tbody>
            </table>
    
            <!-- A paragraph to hold the page content and descriptions -->
            <div id="page-description-div"></div>
            </section>
        </div>
    
        <!-- Importing the footer -->
        <footer id="import-footer"></footer>
    </div>
  </body>
</html>

<script type="text/javascript">
  $(function () {

    $("#import-header").load("/resources/pages/import-header.html");
    $("#import-footer").load("/resources/pages/import-footer.html");

});
</script>