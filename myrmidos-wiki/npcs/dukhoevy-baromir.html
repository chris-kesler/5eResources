<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-US-Compatible" content="e-edge">
    <title>KnowOne's Website of Everything</title>
    <link rel="icon" href="/resources/images/OwlOfMinerva_ModifiedLogo.png">
    <link rel="stylesheet" href="/caped-crusaders-style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>  
    <script>
      $(function readJSON() {
        var npc = [];
        $.getJSON('../npcs.json', function(data) {
          var path = window.location.pathname;
          var page = path.split("/").pop();
          $.each(data.npc, function(i, f) {
            data_page = f.name.toLowerCase().replace(/\s/g, '-').replace("'", "") + ".html";
            if (data_page == page) {
              document.getElementById("common-page-header-title").innerHTML = "Myrmidos:  NPCs > " + f.name;
              document.getElementById("common-page-content-title").innerHTML = f.name;
              document.getElementById("common-page-description").innerHTML = f.description;
              document.getElementById("page-image").src = f.image_weblink;
              image_source = f.image_sourcelink;
              image_alt = f.name;
              var tblRow1 = "<tr><th style='width: 20vw'>Alias</th><th style='width: 20vw'>Title</th><th style='width: 20vw'>Profession</th></tr>"
              $(tblRow1).appendTo("#TechTable tbody");
              var tblRow2 = "<tr>" 
                + "<td>" + f.alias + "</td>" 
                + "<td>" + f.title + "</td>" 
                + "<td>" + f.profession + "</td>" 
                + "</tr>"
              $(tblRow2).appendTo("#TechTable tbody");
              var tblRow3 = "<tr><th>Race</th><th>Location</th><th>Faction</th></tr>";
              $(tblRow3).appendTo("#TechTable tbody");
              var tblRow4 = "<tr>"
                + "<td>" + f.race + "</td>" 
                + "<td>" + f.location + "</td>" 
                + "<td>" + f.faction + "</td>" 
                + "</tr>"
              $(tblRow4).appendTo("#TechTable tbody");
            }
          });
        });
      });
    </script>
  </head>


  <body>
    <div class="common-page-background"> 
      <div class="common-page-header">
        <div class="import-common-page-header"></div>
          <h1 id="common-page-header-title"></h1>
          <hr>
      </div>
        

      <div class="common-page-content-transparent">
            <section class="common-page-content-section">
              <button id="common-page-back-button" onclick="location.href='../npcs.html'">Out to npcs</button>
              <h2 id="common-page-content-title"></h2>
              <hr>

              <!-- A table to hold the page image and credit to author -->
              <table id="entry-page-image-table">
                <tr><td><img id="page-image" alt="NPC Image" onclick="window.open(`${image_source}`)"></td></tr>
                <tr><td><h4 id="page-image-credit">Image Credit</h4></td></tr>
              </table>

              <table id="TechTable" class="cc-attributes-overview-table">
                <tbody></tbody>
              </table>
              <hr>
              <p id="common-page-description">
              </p>
              
            </section>
          </div>
        </div>
      </div>

      <footer class="import-common-page-footer"></footer>

    </div>

  </body>
</html>

<script type="text/javascript">
  $(function () {

    $(".import-common-page-header").load("/resources/pages/import-common-page-header.html");
    $(".import-common-page-footer").load("/resources/pages/import-common-page-footer.html");

});
</script>